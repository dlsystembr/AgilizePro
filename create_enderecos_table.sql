-- Tabela de Endere√ßos
CREATE TABLE IF NOT EXISTS `enderecos` (
    `END_ID` INT(11) NOT NULL AUTO_INCREMENT,
    `PES_ID` INT(11) NOT NULL,
    `EST_ID` INT(11) NOT NULL,
    `MUN_ID` INT(11) NOT NULL,
    `BAI_ID` INT(11) NULL,
    `END_TIPO_ENDENRECO` ENUM('Geral','Faturamento','Entrega','Cobranca') NOT NULL DEFAULT 'Geral',
    `END_TIPO_LOGRADOURO` VARCHAR(30) NULL,
    `END_LOGRADOURO` VARCHAR(150) NOT NULL,
    `END_NUMERO` VARCHAR(15) NULL,
    `END_COMPLEMENTO` VARCHAR(60) NULL,
    `END_CEP` VARCHAR(10) NULL,
    `END_ZONA` ENUM('Rural','Urbana') NULL,
    `END_OBSERVACAO` VARCHAR(255) NULL,
    `END_PADRAO` TINYINT(1) NOT NULL DEFAULT 0,
    `END_SITUACAO` TINYINT(1) NOT NULL DEFAULT 1,
    `END_DATA_INCLUSAO` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `END_DATA_ATUALIZACAO` DATETIME NULL ON UPDATE CURRENT_TIMESTAMP,
    PRIMARY KEY (`END_ID`),
    KEY `idx_enderecos_pessoa` (`PES_ID`),
    KEY `idx_enderecos_municipio` (`MUN_ID`),
    KEY `idx_enderecos_estado` (`EST_ID`),
    KEY `idx_enderecos_bairro` (`BAI_ID`),
    CONSTRAINT `fk_enderecos_pessoas` FOREIGN KEY (`PES_ID`) REFERENCES `pessoas` (`PES_ID`) ON DELETE CASCADE ON UPDATE CASCADE,
    CONSTRAINT `fk_enderecos_municipios` FOREIGN KEY (`MUN_ID`) REFERENCES `municipios` (`MUN_ID`) ON DELETE RESTRICT ON UPDATE CASCADE,
    CONSTRAINT `fk_enderecos_estados` FOREIGN KEY (`EST_ID`) REFERENCES `estados` (`EST_ID`) ON DELETE RESTRICT ON UPDATE CASCADE,
    CONSTRAINT `fk_enderecos_bairros` FOREIGN KEY (`BAI_ID`) REFERENCES `bairros` (`BAI_ID`) ON DELETE SET NULL ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;